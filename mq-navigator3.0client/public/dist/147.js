"use strict";(self.webpackChunkmq_navigator3_0client=self.webpackChunkmq_navigator3_0client||[]).push([[147],{9065:(n,e,t)=>{t.d(e,{A:()=>o});var r=t(6540);function a(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}const o=function(n){var e,t,o=(e=(0,r.useState)(n),t=2,function(n){if(Array.isArray(n))return n}(e)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(i.push(r.value),i.length!==e);c=!0);}catch(n){u=!0,a=n}finally{try{if(!c&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(n,e){if(n){if("string"==typeof n)return a(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(n,e):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=o[0],i=o[1];return[l,(0,r.useCallback)((function(n){i(n.target.value)}),[]),i]}},3147:(n,e,t)=>{t.r(e),t.d(e,{default:()=>Se});var r,a,o,l=t(7452),i=l.A.button(r||(a=["\n  background: transparent;\n  border: none;\n  width: 26px;\n  height: 26px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  color: white;\n  margin-left: 10px;\n  cursor: pointer;\n\n  ",";\n"],o||(o=a.slice(0)),r=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(o)}}))),(function(n){return n.collapse&&"\n    & i {\n      transform: none;\n    }\n  "})),c=t(3240),u=t(6540),s=t(6347),d=t(4625),p=t(9324);const f=function(n){var e=n.channel,t=(0,s.g)().workspace,r=(0,s.zy)(),a=(0,p.Ay)("/api/users",c.A,{dedupingInterval:2e3}).data,o=localStorage.getItem("".concat(t,"-").concat(e.name))||0,l=(0,p.Ay)(a?"/api/workspaces/".concat(t,"/channels/").concat(e.name,"/unreads?after=").concat(o):null,c.A),i=l.data,f=l.mutate;return(0,u.useEffect)((function(){r.pathname==="/workspace/".concat(t,"/channel/").concat(e.name)&&f(0)}),[f,r.pathname,t,e]),u.createElement(d.k2,{key:e.name,activeClassName:"selected",to:"/workspace/".concat(t,"/channel/").concat(e.name)},u.createElement("span",{className:void 0!==i&&i>0?"bold":void 0},"# ",e.name),void 0!==i&&i>0&&u.createElement("span",{className:"count"},i))};function m(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}const h=function(){var n=(0,s.g)().workspace,e=function(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(i.push(r.value),i.length!==e);c=!0);}catch(n){u=!0,a=n}finally{try{if(!c&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(n,e)||function(n,e){if(n){if("string"==typeof n)return m(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m(n,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,u.useState)(!1),2),t=e[0],r=e[1],a=(0,p.Ay)("/api/users",c.A,{dedupingInterval:2e3}).data,o=(0,p.Ay)(a?"/api/workspaces/".concat(n,"/channels"):null,c.A).data,l=(0,u.useCallback)((function(){r((function(n){return!n}))}),[]);return u.createElement(u.Fragment,null,u.createElement("h2",null,u.createElement(i,{collapse:t,onClick:l},u.createElement("i",{className:"c-icon p-channel_sidebar__section_heading_expand p-channel_sidebar__section_heading_expand--show_more_feature c-icon--caret-right c-icon--inherit c-icon--inline","data-qa":"channel-section-collapse","aria-hidden":"true"})),u.createElement("span",null,"Channels")),u.createElement("div",null,!t&&(null==o?void 0:o.map((function(n){return u.createElement(f,{key:n.id,channel:n})})))))};var g,b;function v(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var y=l.A.div(g||(g=v(["\n  position: fixed;\n  text-align: center;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  right: 0;\n  z-index: 1022;\n\n  & > div {\n    margin-top: 200px;\n    display: inline-block;\n    width: 440px;\n    background: white;\n    --saf-0: rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);\n    box-shadow: 0 0 0 1px var(--saf-0), 0 4px 12px 0 rgba(0, 0, 0, 0.12);\n    background-color: rgba(var(--sk_foreground_min_solid, 248, 248, 248), 1);\n    border-radius: 6px;\n    user-select: none;\n    max-width: 440px;\n    padding: 30px 40px 0;\n    z-index: 1012;\n    position: relative;\n  }\n"]))),x=l.A.button(b||(b=v(["\n  position: absolute;\n  right: 10px;\n  top: 6px;\n  background: transparent;\n  border: none;\n  font-size: 30px;\n  cursor: pointer;\n"])));const w=function(n){var e=n.show,t=n.children,r=n.onCloseModal,a=(0,u.useCallback)((function(n){n.stopPropagation()}),[]);return e?u.createElement(y,{onClick:r},u.createElement("div",{onClick:a},u.createElement(x,{onClick:r},"×"),t)):null};var k=t(9065),A=t(2747),E=t(1083),S=t(6474);function C(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}const _=function(n){var e=n.show,t=n.onCloseModal,r=n.setShowCreateChannelModal,a=(0,s.g)().workspace,o=function(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(i.push(r.value),i.length!==e);c=!0);}catch(n){u=!0,a=n}finally{try{if(!c&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(n,e)||function(n,e){if(n){if("string"==typeof n)return C(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?C(n,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,k.A)(""),3),l=o[0],i=o[1],d=o[2],f=(0,p.Ay)("/api/users",c.A).data,m=(0,p.Ay)(f?"/api/workspaces/".concat(a,"/channels"):null,c.A).mutate,h=(0,u.useCallback)((function(n){n.preventDefault(),l&&l.trim()&&E.A.post("/api/workspaces/".concat(a,"/channels"),{name:l}).then((function(){m(),r(!1),d("")})).catch((function(n){var e;console.dir(n),S.oR.error(null===(e=n.response)||void 0===e?void 0:e.data,{position:"bottom-center"})}))}),[l,m,d,r,a]);return u.createElement(w,{show:e,onCloseModal:t},u.createElement("form",{onSubmit:h},u.createElement(A.JU,{id:"channel-label"},u.createElement("span",null,"채널 이름"),u.createElement(A.pd,{id:"channel",value:l,onChange:i})),u.createElement(A.$n,null,"생성하기")))},j=function(n){var e=n.member,t=n.isOnline,r=(0,s.g)().workspace,a=(0,s.zy)(),o=(0,p.Ay)("/api/users",c.A,{dedupingInterval:2e3}).data,l=localStorage.getItem("".concat(r,"-").concat(e.id))||0,i=(0,p.Ay)(o?"/api/workspaces/".concat(r,"/dms/").concat(e.id,"/unreads?after=").concat(l):null,c.A),f=i.data,m=i.mutate;return(0,u.useEffect)((function(){a.pathname==="/workspace/".concat(r,"/dm/").concat(e.id)&&m(0)}),[m,a.pathname,r,e]),u.createElement(d.k2,{key:e.id,activeClassName:"selected",to:"/workspace/".concat(r,"/dm/").concat(e.id)},u.createElement("i",{className:"c-icon p-channel_sidebar__presence_icon p-channel_sidebar__presence_icon--dim_enabled c-presence ".concat(t?"c-presence--active c-icon--presence-online":"c-icon--presence-offline"),"aria-hidden":"true","data-qa":"presence_indicator","data-qa-presence-self":"false","data-qa-presence-active":"false","data-qa-presence-dnd":"false"}),u.createElement("span",{className:f&&f>0?"bold":void 0},e.nickname),e.id===(null==o?void 0:o.id)&&u.createElement("span",null," (나)"),f&&f>0&&u.createElement("span",{className:"count"},f)||null)};var O=t(3508),I={};const T=function(n){var e=(0,u.useCallback)((function(){n&&I[n]&&(console.log("소켓 연결 끊음"),I[n].disconnect(),delete I[n])}),[n]);return n?(I[n]||(I[n]=(0,O.io)("".concat("https://sleact.nodebird.com","/ws-").concat(n),{transports:["websocket"]}),console.info("create socket",n,I[n]),I[n].on("connect_error",(function(n){console.error(n),console.log("connect_error due to ".concat(n.message))}))),[I[n],e]):[void 0,e]};function z(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(i.push(r.value),i.length!==e);c=!0);}catch(n){u=!0,a=n}finally{try{if(!c&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(n,e)||function(n,e){if(n){if("string"==typeof n)return M(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?M(n,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}const D=function(){var n=(0,s.g)().workspace,e=(0,p.Ay)("/api/users",c.A,{dedupingInterval:2e3}).data,t=(0,p.Ay)(e?"/api/workspaces/".concat(n,"/members"):null,c.A).data,r=z(T(n),1)[0],a=z((0,u.useState)(!1),2),o=a[0],l=a[1],d=z((0,u.useState)([]),2),f=d[0],m=d[1],h=(0,u.useCallback)((function(){l((function(n){return!n}))}),[]);return(0,u.useEffect)((function(){console.log("DMList: workspace 바꼈다",n),m([])}),[n]),(0,u.useEffect)((function(){return null==r||r.on("onlineList",(function(n){m(n)})),console.log("socket on dm",null==r?void 0:r.hasListeners("dm"),r),function(){console.log("socket off dm",null==r?void 0:r.hasListeners("dm")),null==r||r.off("onlineList")}}),[r]),u.createElement(u.Fragment,null,u.createElement("h2",null,u.createElement(i,{collapse:o,onClick:h},u.createElement("i",{className:"c-icon p-channel_sidebar__section_heading_expand p-channel_sidebar__section_heading_expand--show_more_feature c-icon--caret-right c-icon--inherit c-icon--inline","data-qa":"channel-section-collapse","aria-hidden":"true"})),u.createElement("span",null,"Direct Messages")),u.createElement("div",null,!o&&(null==t?void 0:t.map((function(n){var e=f.includes(n.id);return u.createElement(j,{key:n.id,member:n,isOnline:e})})))))};function N(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}const U=function(n){var e=n.show,t=n.onCloseModal,r=n.setShowInviteWorkspaceModal,a=(0,s.g)().workspace,o=function(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(i.push(r.value),i.length!==e);c=!0);}catch(n){u=!0,a=n}finally{try{if(!c&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(n,e)||function(n,e){if(n){if("string"==typeof n)return N(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?N(n,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,k.A)(""),3),l=o[0],i=o[1],d=o[2],f=(0,p.Ay)("/api/users",c.A).data,m=(0,p.Ay)(f?"/api/workspaces/".concat(a,"/members"):null,c.A).mutate,h=(0,u.useCallback)((function(n){n.preventDefault(),l&&l.trim()&&E.A.post("/api/workspaces/".concat(a,"/members"),{email:l}).then((function(){m(),r(!1),d("")})).catch((function(n){var e;console.dir(n),S.oR.error(null===(e=n.response)||void 0===e?void 0:e.data,{position:"bottom-center"})}))}),[l,a,m,r,d]);return u.createElement(w,{show:e,onCloseModal:t},u.createElement("form",{onSubmit:h},u.createElement(A.JU,{id:"member-label"},u.createElement("span",null,"이메일"),u.createElement(A.pd,{id:"member",type:"email",value:l,onChange:i})),u.createElement(A.$n,{type:"submit"},"초대하기")))};var R,P;function $(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var B=l.A.div(R||(R=$(["\n  position: fixed;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  z-index: 1000;\n\n  & > div {\n    position: absolute;\n    display: inline-block;\n    --saf-0: rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);\n    box-shadow: 0 0 0 1px var(--saf-0), 0 4px 12px 0 rgba(0, 0, 0, 0.12);\n    background-color: rgba(var(--sk_foreground_min_solid, 248, 248, 248), 1);\n    border-radius: 6px;\n    user-select: none;\n    min-width: 360px;\n    z-index: 512;\n    max-height: calc(100vh - 20px);\n    color: rgb(29, 28, 29);\n  }\n"]))),q=l.A.button(P||(P=$(["\n  position: absolute;\n  right: 10px;\n  top: 6px;\n  background: transparent;\n  border: none;\n  font-size: 30px;\n  cursor: pointer;\n"])));const F=function(n){var e=n.closeButton,t=void 0===e||e,r=n.style,a=n.show,o=n.children,l=n.onCloseModal,i=(0,u.useCallback)((function(n){n.stopPropagation()}),[]);return a?u.createElement(B,{onClick:l},u.createElement("div",{onClick:i,style:r},t&&u.createElement(q,{onClick:l},"×"),o)):null};var H,W,L,J,V,Y,K=t(5972);function G(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var Q=l.A.div(H||(H=G(["\n  display: flex;\n  width: 100%;\n  padding: 20px;\n  padding-top: 0;\n"]))),X=l.A.form(W||(W=G(["\n  color: rgb(29, 28, 29);\n  font-size: 15px;\n  width: 100%;\n  border-radius: 4px;\n  border: 1px solid rgb(29, 28, 29);\n"]))),Z=(0,l.A)(K.G)(L||(L=G(["\n  font-family: Slack-Lato, appleLogo, sans-serif;\n  font-size: 15px;\n  padding: 8px 9px;\n\n  & strong {\n    background: skyblue;\n  }\n\n  & textarea {\n    height: 44px;\n    padding: 9px 10px !important;\n    outline: none !important;\n    border-radius: 4px !important;\n    resize: none !important;\n    line-height: 22px;\n    border: none;\n  }\n\n  & ul {\n    border: 1px solid lightgray;\n    max-height: 200px;\n    overflow-y: auto;\n    padding: 9px 10px;\n    background: white;\n    border-radius: 4px;\n    width: 150px;\n  }\n"]))),nn=l.A.div(J||(J=G(["\n  position: relative;\n  background: rgb(248, 248, 248);\n  height: 41px;\n  display: flex;\n  border-top: 1px solid rgb(221, 221, 221);\n  align-items: center;\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n"]))),en=l.A.button(V||(V=G(["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n"]))),tn=l.A.button(Y||(Y=G(["\n  padding: 4px 20px;\n  background: transparent;\n  border: none;\n  display: flex;\n  align-items: center;\n  color: rgb(28, 29, 28);\n  width: 100%;\n\n  & img {\n    margin-right: 5px;\n  }\n\n  ",";\n"])),(function(n){return n.focus&&"\n    background: #1264a3;\n    color: white;\n  "})),rn=t(1173),an=t(3365),on=t.n(an);const ln=function(n){var e=n.onSubmitForm,t=n.chat,r=n.onChangeChat,a=n.placeholder,o=n.data,l=(0,u.useRef)(null);(0,u.useEffect)((function(){l.current&&(0,rn.A)(l.current)}),[]);var i=(0,u.useCallback)((function(n){n.nativeEvent.isComposing||"Enter"!==n.key||n.shiftKey||(n.preventDefault(),e(n))}),[e]),c=(0,u.useCallback)((function(n,e,t,r,a){return o?u.createElement(tn,{focus:a},u.createElement("img",{src:on().url(o[r].email,{s:"20px",d:"retro"}),alt:o[r].nickname}),u.createElement("span",null,t)):null}),[o]);return u.createElement(Q,null,u.createElement(X,{onSubmit:e},u.createElement(Z,{id:"editor-chat",value:t,onChange:r,onKeyPress:i,placeholder:a,inputRef:l,forceSuggestionsAboveCursor:!0},u.createElement(K.P,{appendSpaceOnAdd:!0,trigger:"@",data:(null==o?void 0:o.map((function(n){return{id:n.id,display:n.nickname}})))||[],renderSuggestion:c})),u.createElement(nn,null,u.createElement(en,{className:"c-button-unstyled c-icon_button c-icon_button--light c-icon_button--size_medium c-texty_input__button c-texty_input__button--send"+(null!=t&&t.trim()?"":" c-texty_input__button--disabled"),"data-qa":"texty_send_button","aria-label":"Send message","data-sk":"tooltip_parent",type:"submit",disabled:!(null!=t&&t.trim())},u.createElement("i",{className:"c-icon c-icon--paperplane-filled","aria-hidden":"true"})))))};var cn,un=l.A.div(cn||(cn=function(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}(["\n  display: flex;\n  padding: 8px 20px;\n\n  &:hover {\n    background: #eee;\n  }\n\n  & .chat-img {\n    display: flex;\n    width: 36px;\n    margin-right: 8px;\n\n    & img {\n      width: 36px;\n      height: 36px;\n    }\n  }\n\n  & .chat-text {\n    display: flex;\n    flex-wrap: wrap;\n    flex: 1;\n\n    & p {\n      flex: 0 0 100%;\n      margin: 0;\n    }\n  }\n\n  & .chat-user {\n    display: flex;\n    flex: 0 0 100%;\n    align-items: center;\n\n    & > b {\n      margin-right: 5px;\n    }\n\n    & > span {\n      font-size: 12px;\n    }\n  }\n\n  & a {\n    text-decoration: none;\n    color: deepskyblue;\n  }\n"]))),sn=t(4353),dn=t.n(sn),pn=t(568);const fn=(0,u.memo)((function(n){var e=n.data,t=(0,s.g)().workspace,r="Sender"in e?e.Sender:e.User,a=(0,u.useMemo)((function(){return e.content.startsWith("uploads\\")||e.content.startsWith("uploads/")?u.createElement("img",{src:"".concat("https://sleact.nodebird.com","/").concat(e.content),style:{maxHeight:200}}):(0,pn.A)({pattern:/@\[(.+?)]\((\d+?)\)|\n/g,decorator:function(n,e){var r=n.match(/@\[(.+?)]\((\d+?)\)/);return r?u.createElement(d.N_,{key:n+e,to:"/workspace/".concat(t,"/dm/").concat(r[2])},"@",r[1]):u.createElement("br",{key:e})},input:e.content})}),[t,e.content]);return u.createElement(un,null,u.createElement("div",{className:"chat-img"},u.createElement("img",{src:on().url(r.email,{s:"36px",d:"retro"}),alt:r.nickname})),u.createElement("div",{className:"chat-text"},u.createElement("div",{className:"chat-user"},u.createElement("b",null,r.nickname),u.createElement("span",null,dn()(e.createdAt).format("h:mm A"))),u.createElement("p",null,a)))}));var mn,hn,gn;function bn(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var vn=l.A.div(mn||(mn=bn(["\n  width: 100%;\n  display: flex;\n  flex: 1;\n"]))),yn=l.A.section(hn||(hn=bn(["\n  margin-top: 20px;\n  border-top: 1px solid #eee;\n"]))),xn=l.A.div(gn||(gn=bn(["\n  display: flex;\n  justify-content: center;\n  flex: 1;\n  width: 100%;\n  position: sticky;\n  top: 14px;\n\n  & button {\n    font-weight: bold;\n    font-size: 13px;\n    height: 28px;\n    line-height: 27px;\n    padding: 0 16px;\n    z-index: 2;\n    --saf-0: rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);\n    box-shadow: 0 0 0 1px var(--saf-0), 0 1px 3px 0 rgba(0, 0, 0, 0.08);\n    border-radius: 24px;\n    position: relative;\n    top: -13px;\n    background: white;\n    border: none;\n    outline: none;\n  }\n"]))),wn=t(2295);function kn(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}const An=function(n){var e=n.scrollbarRef,t=n.isReachingEnd,r=n.isEmpty,a=n.chatSections,o=n.setSize,l=(0,u.useCallback)((function(n){0!==n.scrollTop||t||r||o((function(n){return n+1})).then((function(){var t,r;null===(t=e.current)||void 0===t||t.scrollTop((null===(r=e.current)||void 0===r?void 0:r.getScrollHeight())-n.scrollHeight)}))}),[o,e,t,r]);return u.createElement(vn,null,u.createElement(wn.ur,{autoHide:!0,ref:e,onScrollFrame:l},Object.entries(a).map((function(n){var e=function(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(i.push(r.value),i.length!==e);c=!0);}catch(n){u=!0,a=n}finally{try{if(!c&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(n,e)||function(n,e){if(n){if("string"==typeof n)return kn(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?kn(n,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n,2),t=e[0],r=e[1];return u.createElement(yn,{className:"section-".concat(t),key:t},u.createElement(xn,null,u.createElement("button",null,t)),r.map((function(n){return u.createElement(fn,{key:n.id,data:n})})))}))))};function En(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}const Sn=function(n){var e=n.show,t=n.onCloseModal,r=n.setShowInviteChannelModal,a=(0,s.g)(),o=a.workspace,l=a.channel,i=function(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(i.push(r.value),i.length!==e);c=!0);}catch(n){u=!0,a=n}finally{try{if(!c&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(n,e)||function(n,e){if(n){if("string"==typeof n)return En(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?En(n,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,k.A)(""),3),d=i[0],f=i[1],m=i[2],h=(0,p.Ay)("/api/users",c.A).data,g=(0,p.Ay)(h?"/api/workspaces/".concat(o,"/channels/").concat(l,"/members"):null,c.A).mutate,b=(0,u.useCallback)((function(n){n.preventDefault(),d&&d.trim()&&E.A.post("/api/workspaces/".concat(o,"/channels/").concat(l,"/members"),{email:d}).then((function(){g(),r(!1),m("")})).catch((function(n){var e;console.dir(n),S.oR.error(null===(e=n.response)||void 0===e?void 0:e.data,{position:"bottom-center"})}))}),[l,d,g,m,r,o]);return u.createElement(w,{show:e,onCloseModal:t},u.createElement("form",{onSubmit:b},u.createElement(A.JU,{id:"member-label"},u.createElement("span",null,"채널 멤버 초대"),u.createElement(A.pd,{id:"member",value:d,onChange:f})),u.createElement(A.$n,{type:"submit"},"초대하기")))};var Cn,_n,jn;function On(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var In=l.A.div(Cn||(Cn=On(["\n  display: flex;\n  flex-wrap: wrap;\n  height: calc(100vh - 38px);\n  flex-flow: column;\n  position: relative;\n"]))),Tn=l.A.header(_n||(_n=On(["\n  height: 64px;\n  display: flex;\n  width: 100%;\n  --saf-0: rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);\n  box-shadow: 0 1px 0 var(--saf-0);\n  padding: 20px 16px 20px 20px;\n  font-weight: bold;\n  align-items: center;\n"]))),zn=l.A.div(jn||(jn=On(["\n  position: absolute;\n  top: 64px;\n  left: 0;\n  width: 100%;\n  height: calc(100% - 64px);\n  background: white;\n  opacity: 0.7;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 40px;\n"])));function Mn(n){var e={};return n.forEach((function(n){var t=dn()(n.createdAt).format("YYYY-MM-DD");Array.isArray(e[t])?e[t].push(n):e[t]=[n]})),e}var Dn=t(3041);function Nn(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(i.push(r.value),i.length!==e);c=!0);}catch(n){u=!0,a=n}finally{try{if(!c&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(n,e)||Un(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Un(n,e){if(n){if("string"==typeof n)return Rn(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Rn(n,e):void 0}}function Rn(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}const Pn=function(){var n,e,t,r=(0,s.g)(),a=r.workspace,o=r.channel,l=Nn(T(a),1)[0],i=(0,p.Ay)("/api/users",c.A).data,d=(0,p.Ay)("/api/workspaces/".concat(a,"/channels"),c.A).data,f=null==d?void 0:d.find((function(n){return n.name===o})),m=(0,Dn.Ay)((function(n){return"/api/workspaces/".concat(a,"/channels/").concat(o,"/chats?perPage=").concat(20,"&page=").concat(n+1)}),c.A,{onSuccess:function(n){1===(null==n?void 0:n.length)&&setTimeout((function(){var n;null===(n=O.current)||void 0===n||n.scrollToBottom()}),100)}}),h=m.data,g=m.mutate,b=m.setSize,v=(0,p.Ay)(i?"/api/workspaces/".concat(a,"/channels/").concat(o,"/members"):null,c.A).data,y=Nn((0,k.A)(""),3),x=y[0],w=y[1],A=y[2],C=Nn((0,u.useState)(!1),2),_=C[0],j=C[1],O=(0,u.useRef)(null),I=Nn((0,u.useState)(!1),2),z=I[0],M=I[1],D=0===(null==h||null===(n=h[0])||void 0===n?void 0:n.length),N=D||h&&(null===(e=h[h.length-1])||void 0===e?void 0:e.length)<20,U=(0,u.useCallback)((function(){j(!1)}),[]),R=(0,u.useCallback)((function(n){if(n.preventDefault(),null!=x&&x.trim()&&h&&f&&i){var e=x;g((function(n){var t;return null==n||n[0].unshift({id:((null===(t=h[0][0])||void 0===t?void 0:t.id)||0)+1,content:e,UserId:i.id,User:i,createdAt:new Date,ChannelId:f.id,Channel:f}),n}),!1).then((function(){var n;localStorage.setItem("".concat(a,"-").concat(o),(new Date).getTime().toString()),A(""),O.current&&(console.log("scrollToBottom!",null===(n=O.current)||void 0===n?void 0:n.getValues()),O.current.scrollToBottom())})),E.A.post("/api/workspaces/".concat(a,"/channels/").concat(o,"/chats"),{content:e}).catch(console.error)}}),[x,a,o,f,i,h,g,A]),P=(0,u.useCallback)((function(n){n.Channel.name===o&&(n.content.startsWith("uploads\\")||n.content.startsWith("uploads/")||n.UserId!==(null==i?void 0:i.id))&&g((function(e){return null==e||e[0].unshift(n),e}),!1).then((function(){var n;O.current&&(O.current.getScrollHeight()<O.current.getClientHeight()+O.current.getScrollTop()+150?(console.log("scrollToBottom!",null===(n=O.current)||void 0===n?void 0:n.getValues()),setTimeout((function(){var n;null===(n=O.current)||void 0===n||n.scrollToBottom()}),100)):S.oR.success("새 메시지가 도착했습니다.",{onClick:function(){var n;null===(n=O.current)||void 0===n||n.scrollToBottom()},closeOnClick:!0}))}))}),[o,i,g]);(0,u.useEffect)((function(){return null==l||l.on("message",P),function(){null==l||l.off("message",P)}}),[l,P]),(0,u.useEffect)((function(){localStorage.setItem("".concat(a,"-").concat(o),(new Date).getTime().toString())}),[a,o]);var $=(0,u.useCallback)((function(){j(!0)}),[]),B=(0,u.useCallback)((function(n){n.preventDefault(),console.log(n);var e=new FormData;if(n.dataTransfer.items){for(var t=0;t<n.dataTransfer.items.length;t++)if(console.log(n.dataTransfer.items[t]),"file"===n.dataTransfer.items[t].kind){var r=n.dataTransfer.items[t].getAsFile();r&&(console.log(n,".... file["+t+"].name = "+r.name),e.append("image",r))}}else for(var l=0;l<n.dataTransfer.files.length;l++)console.log(n,"... file["+l+"].name = "+n.dataTransfer.files[l].name),e.append("image",n.dataTransfer.files[l]);E.A.post("/api/workspaces/".concat(a,"/channels/").concat(o,"/images"),e).then((function(){M(!1),localStorage.setItem("".concat(a,"-").concat(o),(new Date).getTime().toString())}))}),[a,o]),q=(0,u.useCallback)((function(n){n.preventDefault(),console.log(n),M(!0)}),[]);if(d&&!f)return u.createElement(s.rd,{to:"/workspace/".concat(a,"/channel/일반")});var F,H=Mn(h?(t=[]).concat.apply(t,(F=h,function(n){if(Array.isArray(n))return Rn(n)}(F)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(F)||Un(F)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).reverse():[]);return u.createElement(In,{onDrop:B,onDragOver:q},u.createElement(Tn,null,u.createElement("span",null,"#",o),u.createElement("div",{style:{display:"flex",flex:1,justifyContent:"flex-end",alignItems:"center"}},u.createElement("span",null,null==v?void 0:v.length),u.createElement("button",{onClick:$,className:"c-button-unstyled p-ia__view_header__button","aria-label":"Add people to #react-native","data-sk":"tooltip_parent",type:"button"},u.createElement("i",{className:"c-icon p-ia__view_header__button_icon c-icon--add-user","aria-hidden":"true"})))),u.createElement(An,{scrollbarRef:O,isReachingEnd:N,isEmpty:D,chatSections:H,setSize:b}),u.createElement(ln,{onSubmitForm:R,chat:x,onChangeChat:w,placeholder:"Message #".concat(o),data:v}),u.createElement(Sn,{show:_,onCloseModal:U,setShowInviteChannelModal:j}),u.createElement(S.N9,{position:"bottom-center"}),z&&u.createElement(zn,null,"업로드!"))};var $n,Bn;function qn(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var Fn=l.A.div($n||($n=qn(["\n  display: flex;\n  flex-wrap: wrap;\n  height: calc(100vh - 38px);\n  flex-flow: column;\n  position: relative;\n"]))),Hn=l.A.header(Bn||(Bn=qn(["\n  height: 64px;\n  display: flex;\n  width: 100%;\n  --saf-0: rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);\n  box-shadow: 0 1px 0 var(--saf-0);\n  padding: 20px 16px 20px 20px;\n  font-weight: bold;\n  align-items: center;\n\n  & img {\n    margin-right: 5px;\n  }\n"])));function Wn(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(i.push(r.value),i.length!==e);c=!0);}catch(n){u=!0,a=n}finally{try{if(!c&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(n,e)||Ln(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ln(n,e){if(n){if("string"==typeof n)return Jn(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Jn(n,e):void 0}}function Jn(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}const Vn=function(){var n,e,t,r=(0,s.g)(),a=r.workspace,o=r.id,l=Wn(T(a),1)[0],i=(0,p.Ay)("/api/users",c.A).data,d=(0,p.Ay)("/api/workspaces/".concat(a,"/users/").concat(o),c.A).data,f=(0,Dn.Ay)((function(n){return"/api/workspaces/".concat(a,"/dms/").concat(o,"/chats?perPage=").concat(20,"&page=").concat(n+1)}),c.A,{onSuccess:function(n){1===(null==n?void 0:n.length)&&setTimeout((function(){var n;null===(n=w.current)||void 0===n||n.scrollToBottom()}),100)}}),m=f.data,h=f.mutate,g=f.setSize,b=Wn((0,k.A)(""),3),v=b[0],y=b[1],x=b[2],w=(0,u.useRef)(null),A=Wn((0,u.useState)(!1),2),C=A[0],_=A[1],j=0===(null==m||null===(n=m[0])||void 0===n?void 0:n.length),O=j||m&&(null===(e=m[m.length-1])||void 0===e?void 0:e.length)<20,I=(0,u.useCallback)((function(n){if(n.preventDefault(),null!=v&&v.trim()&&m){var e=v;h((function(n){var t;return null==n||n[0].unshift({id:((null===(t=m[0][0])||void 0===t?void 0:t.id)||0)+1,content:e,SenderId:i.id,Sender:i,ReceiverId:d.id,Receiver:d,createdAt:new Date}),n}),!1).then((function(){var n;localStorage.setItem("".concat(a,"-").concat(o),(new Date).getTime().toString()),x(""),w.current&&(console.log("scrollToBottom!",null===(n=w.current)||void 0===n?void 0:n.getValues()),w.current.scrollToBottom())})),E.A.post("/api/workspaces/".concat(a,"/dms/").concat(o,"/chats"),{content:v}).catch(console.error)}}),[v,a,o,i,d,m,h,x]),z=(0,u.useCallback)((function(n){n.SenderId===Number(o)&&i.id!==Number(o)&&h((function(e){return null==e||e[0].unshift(n),e}),!1).then((function(){var n;w.current&&(w.current.getScrollHeight()<w.current.getClientHeight()+w.current.getScrollTop()+150?(console.log("scrollToBottom!",null===(n=w.current)||void 0===n?void 0:n.getValues()),setTimeout((function(){var n;null===(n=w.current)||void 0===n||n.scrollToBottom()}),100)):S.oR.success("새 메시지가 도착했습니다.",{onClick:function(){var n;null===(n=w.current)||void 0===n||n.scrollToBottom()},closeOnClick:!0}))}))}),[o,i,h]);(0,u.useEffect)((function(){return null==l||l.on("dm",z),function(){null==l||l.off("dm",z)}}),[l,z]),(0,u.useEffect)((function(){localStorage.setItem("".concat(a,"-").concat(o),(new Date).getTime().toString())}),[a,o]);var M=(0,u.useCallback)((function(n){n.preventDefault(),console.log(n);var e=new FormData;if(n.dataTransfer.items){for(var t=0;t<n.dataTransfer.items.length;t++)if("file"===n.dataTransfer.items[t].kind){var r=n.dataTransfer.items[t].getAsFile();r&&(console.log("... file["+t+"].name = "+r.name),e.append("image",r))}}else for(var l=0;l<n.dataTransfer.files.length;l++)console.log("... file["+l+"].name = "+n.dataTransfer.files[l].name),e.append("image",n.dataTransfer.files[l]);E.A.post("/api/workspaces/".concat(a,"/dms/").concat(o,"/images"),e).then((function(){_(!1),localStorage.setItem("".concat(a,"-").concat(o),(new Date).getTime().toString()),h()}))}),[a,o,h]),D=(0,u.useCallback)((function(n){n.preventDefault(),console.log(n),_(!0)}),[]);if(!d||!i)return null;var N,U=Mn(m?(t=[]).concat.apply(t,(N=m,function(n){if(Array.isArray(n))return Jn(n)}(N)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(N)||Ln(N)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).reverse():[]);return u.createElement(Fn,{onDrop:M,onDragOver:D},u.createElement(Hn,null,u.createElement("img",{src:on().url(d.email,{s:"24px",d:"retro"}),alt:d.nickname}),u.createElement("span",null,d.nickname)),u.createElement(An,{scrollbarRef:w,isReachingEnd:O,isEmpty:j,chatSections:U,setSize:g}),u.createElement(ln,{onSubmitForm:I,chat:v,onChangeChat:y,placeholder:"Message ".concat(d.nickname),data:[]}),C&&u.createElement(zn,null,"업로드!"))};var Yn,Kn,Gn,Qn,Xn,Zn,ne,ee,te,re,ae,oe,le,ie;function ce(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}t(3967);var ue=l.A.div(Yn||(Yn=ce(["\n  float: right;\n"]))),se=l.A.header(Kn||(Kn=ce(["\n  height: 38px;\n  background: #350d36;\n  color: #ffffff;\n  box-shadow: 0 1px 0 0 rgba(255, 255, 255, 0.1);\n  padding: 5px;\n  text-align: center;\n"]))),de=l.A.img(Gn||(Gn=ce(["\n  width: 28px;\n  height: 28px;\n  position: absolute;\n  top: 5px;\n  right: 16px;\n"]))),pe=l.A.div(Qn||(Qn=ce(["\n  display: flex;\n  padding: 20px;\n\n  & img {\n    display: flex;\n  }\n\n  & > div {\n    display: flex;\n    flex-direction: column;\n    margin-left: 10px;\n  }\n\n  & #profile-name {\n    font-weight: bold;\n    display: inline-flex;\n  }\n\n  & #profile-active {\n    font-size: 13px;\n    display: inline-flex;\n  }\n"]))),fe=l.A.button(Xn||(Xn=ce(["\n  border: none;\n  width: 100%;\n  border-top: 1px solid rgb(29, 28, 29);\n  background: transparent;\n  display: block;\n  height: 33px;\n  padding: 5px 20px 5px;\n  outline: none;\n  cursor: pointer;\n"]))),me=l.A.div(Zn||(Zn=ce(["\n  display: flex;\n  flex: 1;\n"]))),he=l.A.div(ne||(ne=ce(["\n  width: 65px;\n  display: inline-flex;\n  flex-direction: column;\n  align-items: center;\n  background: #3f0e40;\n  border-top: 1px solid rgb(82, 38, 83);\n  border-right: 1px solid rgb(82, 38, 83);\n  vertical-align: top;\n  text-align: center;\n  padding: 15px 0 0;\n"]))),ge=l.A.nav(ee||(ee=ce(["\n  width: 260px;\n  display: inline-flex;\n  flex-direction: column;\n  background: #3f0e40;\n  color: rgb(188, 171, 188);\n  vertical-align: top;\n\n  & a {\n    padding-left: 36px;\n    color: inherit;\n    text-decoration: none;\n    height: 28px;\n    line-height: 28px;\n    display: flex;\n    align-items: center;\n\n    &.selected {\n      color: white;\n    }\n  }\n\n  & .bold {\n    color: white;\n    font-weight: bold;\n  }\n\n  & .count {\n    margin-left: auto;\n    background: #cd2553;\n    border-radius: 16px;\n    display: inline-block;\n    font-size: 12px;\n    font-weight: 700;\n    height: 18px;\n    line-height: 18px;\n    padding: 0 9px;\n    color: white;\n    margin-right: 16px;\n  }\n\n  & h2 {\n    height: 36px;\n    line-height: 36px;\n    margin: 0;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap;\n    font-size: 15px;\n  }\n"]))),be=l.A.button(te||(te=ce(["\n  height: 64px;\n  line-height: 64px;\n  border: none;\n  width: 100%;\n  text-align: left;\n  border-top: 1px solid rgb(82, 38, 83);\n  border-bottom: 1px solid rgb(82, 38, 83);\n  font-weight: 900;\n  font-size: 24px;\n  background: transparent;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  padding: 0;\n  padding-left: 16px;\n  margin: 0;\n  color: white;\n  cursor: pointer;\n"]))),ve=l.A.div(re||(re=ce(["\n  height: calc(100vh - 102px);\n  overflow-y: auto;\n"]))),ye=l.A.div(ae||(ae=ce(["\n  padding: 10px 0 0;\n\n  & h2 {\n    padding-left: 20px;\n  }\n\n  & > button {\n    width: 100%;\n    height: 28px;\n    padding: 4px;\n    border: none;\n    background: transparent;\n    border-top: 1px solid rgb(28, 29, 28);\n    cursor: pointer;\n\n    &:last-of-type {\n      border-bottom: 1px solid rgb(28, 29, 28);\n    }\n  }\n"]))),xe=l.A.div(oe||(oe=ce(["\n  flex: 1;\n"]))),we=l.A.button(le||(le=ce(["\n  color: white;\n  font-size: 24px;\n  display: inline-block;\n  width: 40px;\n  height: 40px;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n"]))),ke=l.A.button(ie||(ie=ce(["\n  display: inline-block;\n  width: 40px;\n  height: 40px;\n  border-radius: 10px;\n  background: white;\n  border: 3px solid #3f0e40;\n  margin-bottom: 15px;\n  font-size: 18px;\n  font-weight: 700;\n  color: black;\n  cursor: pointer;\n"])));function Ae(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,a,o,l,i=[],c=!0,u=!1;try{if(o=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(i.push(r.value),i.length!==e);c=!0);}catch(n){u=!0,a=n}finally{try{if(!c&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(n,e)||function(n,e){if(n){if("string"==typeof n)return Ee(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ee(n,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}const Se=function(){var n,e,t=(0,s.g)().workspace,r=Ae(T(t),2),a=r[0],o=r[1],l=(0,p.Ay)("/api/users",c.A),i=l.data,f=l.mutate,m=(0,p.Ay)(i?"/api/workspaces/".concat(t,"/channels"):null,c.A).data,g=Ae((0,u.useState)(!1),2),b=g[0],v=g[1],y=Ae((0,u.useState)(!1),2),x=y[0],C=y[1],j=Ae((0,u.useState)(!1),2),O=j[0],I=j[1],z=Ae((0,u.useState)(!1),2),M=z[0],N=z[1],R=Ae((0,u.useState)(!1),2),P=R[0],$=R[1],B=Ae((0,k.A)(""),3),q=B[0],H=B[1],W=B[2],L=Ae((0,k.A)(""),3),J=L[0],V=L[1],Y=L[2],K=(0,u.useCallback)((function(){E.A.post("/api/users/logout").then((function(){f()})).catch((function(n){var e;console.dir(n),S.oR.error(null===(e=n.response)||void 0===e?void 0:e.data,{position:"bottom-center"})}))}),[]),G=(0,u.useCallback)((function(n){n.preventDefault(),q&&q.trim()&&J&&J.trim()&&E.A.post("/api/workspaces",{workspace:q,url:J}).then((function(){f(),v(!1),W(""),Y("")})).catch((function(n){var e;console.dir(n),S.oR.error(null===(e=n.response)||void 0===e?void 0:e.data,{position:"bottom-center"})}))}),[q,J]),Q=(0,u.useCallback)((function(){v(!0)}),[]),X=(0,u.useCallback)((function(){I(!0)}),[]),Z=(0,u.useCallback)((function(){C(!0)}),[]),nn=(0,u.useCallback)((function(){v(!1),I(!1),C(!1)}),[]),en=(0,u.useCallback)((function(){N((function(n){return!n}))}),[]),tn=(0,u.useCallback)((function(){$((function(n){return!n}))}),[]);return(0,u.useEffect)((function(){return function(){console.info("disconnect socket",t),o()}}),[o,t]),(0,u.useEffect)((function(){m&&i&&(console.info("로그인하자",a),null==a||a.emit("login",{id:null==i?void 0:i.id,channels:m.map((function(n){return n.id}))}))}),[a,i,m]),!1===i?u.createElement(s.rd,{to:"/login"}):u.createElement("div",null,u.createElement(se,null,i&&u.createElement(ue,null,u.createElement("span",{onClick:en},u.createElement(de,{src:on().url(i.email,{s:"28px",d:"retro"}),alt:i.nickname})),M&&u.createElement(F,{style:{right:0,top:38},show:M,onCloseModal:en},u.createElement(pe,null,u.createElement("img",{src:on().url(i.email,{s:"36px",d:"retro"}),alt:i.nickname}),u.createElement("div",null,u.createElement("span",{id:"profile-name"},i.nickname),u.createElement("span",{id:"profile-active"},"Active"))),u.createElement(fe,{onClick:K},"로그아웃")))),u.createElement(me,null,u.createElement(he,null,null==i?void 0:i.Workspaces.map((function(n){return u.createElement(d.N_,{key:n.id,to:"/workspace/".concat(n.url,"/channel/일반")},u.createElement(ke,null,n.name.slice(0,1).toUpperCase()))})),u.createElement(we,{onClick:Q},"+")),u.createElement(ge,null,u.createElement(be,{onClick:tn},null==i||null===(n=i.Workspaces.find((function(n){return n.url===t})))||void 0===n?void 0:n.name),u.createElement(ve,null,u.createElement(F,{show:P,onCloseModal:tn,style:{top:95,left:80}},u.createElement(ye,null,u.createElement("h2",null,null==i||null===(e=i.Workspaces.find((function(n){return n.url===t})))||void 0===e?void 0:e.name),u.createElement("button",{onClick:Z},"워크스페이스에 사용자 초대"),u.createElement("button",{onClick:X},"채널 만들기"),u.createElement("button",{onClick:K},"로그아웃"))),u.createElement(h,null),u.createElement(D,null))),u.createElement(xe,null,u.createElement(s.dO,null,u.createElement(s.qh,{path:"/workspace/:workspace/channel/:channel",component:Pn}),u.createElement(s.qh,{path:"/workspace/:workspace/dm/:id",component:Vn})))),u.createElement(w,{show:b,onCloseModal:nn},u.createElement("form",{onSubmit:G},u.createElement(A.JU,{id:"workspace-label"},u.createElement("span",null,"워크스페이스 이름"),u.createElement(A.pd,{id:"workspace",value:q,onChange:H})),u.createElement(A.JU,{id:"workspace-url-label"},u.createElement("span",null,"워크스페이스 url"),u.createElement(A.pd,{id:"workspace-url",value:J,onChange:V})),u.createElement(A.$n,{type:"submit"},"생성하기"))),u.createElement(_,{show:O,onCloseModal:nn,setShowCreateChannelModal:I}),u.createElement(U,{show:x,onCloseModal:nn,setShowInviteWorkspaceModal:C}),u.createElement(S.N9,{position:"bottom-center"}))}},2747:(n,e,t)=>{t.d(e,{$D:()=>v,$n:()=>b,JU:()=>h,Y9:()=>f,lV:()=>m,mu:()=>x,pd:()=>g,wV:()=>y});var r,a,o,l,i,c,u,s,d=t(7452);function p(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var f=d.A.header(r||(r=p(["\n  text-align: center;\n  font-family: Slack-Larsseit, Helvetica Neue, Helvetica, Segoe UI, Tahoma, Arial, sans-serif;\n  font-weight: 700;\n  font-size: 48px;\n  line-height: 46px;\n  letter-spacing: -0.75px;\n  margin-top: 50px;\n  margin-bottom: 50px;\n"]))),m=d.A.form(a||(a=p(["\n  margin: 0 auto;\n  width: 400px;\n  max-width: 400px;\n"]))),h=d.A.label(o||(o=p(["\n  margin-bottom: 16px;\n\n  & > span {\n    display: block;\n    text-align: left;\n    padding-bottom: 8px;\n    font-size: 15px;\n    cursor: pointer;\n    line-height: 1.46666667;\n    font-weight: 700;\n  }\n"]))),g=d.A.input(l||(l=p(["\n  border-radius: 4px;\n  --saf-0: rgba(var(--sk_foreground_high_solid, 134, 134, 134), 1);\n  border: 1px solid var(--saf-0);\n  transition: border 80ms ease-out, box-shadow 80ms ease-out;\n  box-sizing: border-box;\n  margin: 0 0 20px;\n  width: 100%;\n  color: rgba(var(--sk_primary_foreground, 29, 28, 29), 1);\n  background-color: rgba(var(--sk_primary_background, 255, 255, 255), 1);\n  padding: 12px;\n  height: 44px;\n  padding-top: 11px;\n  padding-bottom: 13px;\n  font-size: 18px;\n  line-height: 1.33333333;\n\n  &:focus {\n    --saf-0: rgba(var(--sk_highlight, 18, 100, 163), 1);\n    box-shadow: 0 0 0 1px var(--saf-0), 0 0 0 5px rgba(29, 155, 209, 0.3);\n  }\n"]))),b=d.A.button(i||(i=p(["\n  margin-bottom: 12px;\n  width: 100%;\n  max-width: 100%;\n  color: #fff;\n  background-color: #4a154b;\n  border: none;\n  font-size: 18px;\n  font-weight: 900;\n  height: 44px;\n  min-width: 96px;\n  padding: 0 16px 3px;\n  transition: all 80ms linear;\n  user-select: none;\n  outline: none;\n  cursor: pointer;\n  border-radius: 4px;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);\n\n  &:hover {\n    background-color: rgba(74, 21, 75, 0.9);\n    border: none;\n  }\n  &:focus {\n    --saf-0: rgba(var(--sk_highlight, 18, 100, 163), 1);\n    box-shadow: 0 0 0 1px var(--saf-0), 0 0 0 5px rgba(29, 155, 209, 0.3);\n  }\n"]))),v=d.A.div(c||(c=p(["\n  color: #e01e5a;\n  margin: 8px 0 16px;\n  font-weight: bold;\n"]))),y=d.A.div(u||(u=p(["\n  color: #2eb67d;\n  font-weight: bold;\n"]))),x=d.A.p(s||(s=p(["\n  font-size: 13px;\n  color: #616061;\n  margin: 0 auto 8px;\n  width: 400px;\n  max-width: 400px;\n\n  & a {\n    color: #1264a3;\n    text-decoration: none;\n    font-weight: 700;\n\n    &:hover {\n      text-decoration: underline;\n    }\n  }\n"])))},3240:(n,e,t)=>{t.d(e,{A:()=>a});var r=t(1083);const a=function(n){return r.A.get(n,{withCredentials:!0}).then((function(n){return n.data}))}}}]);